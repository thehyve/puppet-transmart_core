#!/usr/bin/env bash

SOLR_DIR="<%= @solr_dir %>/solr"
JAVA_OPTIONS="-Xmx1024m -DSTOP.PORT=8079 -DSTOP.KEY=stopkey"
LOG_FILE="<%= @solr_log_file %>"

echo "${0} ${1}"

case $1 in
    start)
        echo "Starting Solr for TranSMART ..."
        cd $SOLR_DIR
        pwd
        java ${JAVA_OPTIONS} -jar start.jar &> ${LOG_FILE} &
        ;;
    stop)
        echo "Stopping Solr for TranSMART ..."
        cd $SOLR_DIR
        java ${JAVA_OPTIONS} -jar start.jar --stop
        ;;
    restart)
        $0 stop
        sleep 1
        $0 start
        ;;
    *)
        echo "Usage: $0 {start|stop|restart}" >&2
        exit 1
        ;;
esac

